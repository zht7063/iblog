<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ site.title }}{% endblock %}</title>
    <style>
        body {
            max-width: {{ theme.layout.max_width }};
            margin: 0 auto;
            padding: {{ theme.layout.padding }};
            background: {{ theme.colors.background }};
            color: {{ theme.colors.text }};
            {% if theme.fonts.body %}font-family: {{ theme.fonts.body }};{% endif %}
        }

        header {
            margin-top: 40px;
            margin-bottom: 30px;
        }

        header h1 {
            margin: 0;
            font-size: 2em;
        }

        nav {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1.5px solid #000;
        }

        nav a {
            text-decoration: none;
            color: {{ theme.colors.link }};
        }

        nav a:hover {
            text-decoration: underline;
            text-decoration-thickness: 1px;
            text-underline-offset: 4px;
            background: {{ theme.colors.hover_bg }};
        }

        nav a:link,
        nav a:visited,
        nav a:active {
            color: {{ theme.colors.link }};
        }

        footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid {{ theme.colors.border }};
            text-align: center;
            font-size: 0.9em;
            color: {{ theme.colors.text_secondary }};
        }

        footer > div {
            margin-bottom: 10px;
        }

        footer a {
            color: {{ theme.colors.text_secondary }};
            text-decoration: none;
        }

        footer a:hover {
            color: {{ theme.colors.text }};
            text-decoration: underline;
        }

        @media (max-width: 767px) {
            body {
                padding: {{ theme.layout.padding_mobile }};
            }
            header {
                margin-top: 20px;
            }
            footer {
                margin-top: 40px;
                padding-top: 20px;
                font-size: 0.85em;
            }
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- 顶部标题区域 -->
    <header>
        <h1>{{ site.title }}</h1>
        <p>{{ site.subtitle }}</p>
    </header>
    
    <!-- 导航栏 -->
    <nav>
        {% for item in navigation %}
        <a href="{{ item.url }}">{% if item.icon %}{{ item.icon }} {% endif %}{{ item.name }}</a>
        {% endfor %}
    </nav>
    
    <!-- 正文内容区域，由子模板填充 -->
    {% block content %}{% endblock %}
    
    <!-- 页脚 -->
    <footer>
        <div class="footer-copyright">{{ footer.copyright }}</div>
        {% if footer.social_links %}
        <div class="footer-social">
            {% for link in footer.social_links %}
            <a href="{{ link.url }}" target="_blank" rel="noopener noreferrer">{{ link.name }}</a>{% if not loop.last %} | {% endif %}
            {% endfor %}
        </div>
        {% endif %}
        <div class="footer-info">
            {% if footer.show_powered_by %}Powered by {{ footer.powered_by_text }}{% endif %}
            {% if footer.show_run_days %}{% if footer.show_powered_by %} • {% endif %}运行 <span id="runDays">0</span> 天{% endif %}
            {% if footer.show_post_count %}{% if footer.show_powered_by or footer.show_run_days %} • {% endif %}共 {{ total_posts }} 篇博客{% endif %}
        </div>
    </footer>
    
    {% if footer.show_run_days %}
    <script>
        // 计算运行天数
        const startDate = new Date('{{ site.start_date }}');
        const today = new Date();
        const diffTime = Math.abs(today - startDate);
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        document.getElementById('runDays').textContent = diffDays;
    </script>
    {% endif %}
</body>
</html>
